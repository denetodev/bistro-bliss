<div class="contact-list-container">
  <h2>Gestão de Contatos</h2>

  <p-table [value]="contacts" [tableStyle]="{ 'min-width': '50rem' }">
    <ng-template pTemplate="header">
      <tr>
        <th>Nome</th>
        <th>Email</th>
        <th>Assunto</th>
        <th>Status</th>
        <th>Ações</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-contact>
      <tr>
        <td>
          <a (click)="showContactDetails(contact)" class="contact-name">
            {{ contact.name }}
          </a>
        </td>
        <td>{{ contact.email }}</td>
        <td>{{ contact.subject }}</td>
        <td>
          <span class="status-badge" [ngClass]="contact.status">
            {{ contact.status || "Pendente" }}
          </span>
        </td>
        <td>
          <p-button
            icon="pi pi-check"
            (onClick)="updateStatus(contact, 'positive')"
            [class.active]="contact.status === 'positive'"
            styleClass="p-button-rounded p-button-success mr-2"
          >
          </p-button>
          <p-button
            icon="pi pi-times"
            (onClick)="updateStatus(contact, 'negative')"
            [class.active]="contact.status === 'negative'"
            styleClass="p-button-rounded p-button-danger"
          >
          </p-button>
        </td>
      </tr>
    </ng-template>
  </p-table>

  <p-dialog
    [(visible)]="displayModal"
    [modal]="true"
    [style]="{ width: '50vw' }"
    [draggable]="false"
    [resizable]="false"
  >
    <ng-template pTemplate="header">
      <h3>Detalhes do Contato</h3>
    </ng-template>
    <div class="contact-details" *ngIf="selectedContact">
      <div class="detail-row">
        <label>Nome:</label>
        <span>{{ selectedContact.name }}</span>
      </div>
      <div class="detail-row">
        <label>Email:</label>
        <span>{{ selectedContact.email }}</span>
      </div>
      <div class="detail-row">
        <label>Assunto:</label>
        <span>{{ selectedContact.subject }}</span>
      </div>
      <div class="detail-row">
        <label>Mensagem:</label>
        <p>{{ selectedContact.message }}</p>
      </div>
    </div>
    <ng-template pTemplate="footer">
      <p-button
        label="Fechar"
        (onClick)="displayModal = false"
        styleClass="p-button-secondary"
      >
      </p-button>
    </ng-template>
  </p-dialog>
</div>
